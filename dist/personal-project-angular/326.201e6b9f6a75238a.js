"use strict";(self.webpackChunkpersonal_project_angular=self.webpackChunkpersonal_project_angular||[]).push([[326],{7326:(b,g,a)=>{a.r(g),a.d(g,{AuthModule:()=>A});var c=a(6895),p=a(1135),e=a(8274),d=a(8271);let h=(()=>{class n{constructor(t){this.db=t,this.error=new p.X(!1)}login(){return this.db.getUsers()}register(t){return this.db.addUser(t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d.k))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=a(72),C=a(7051),o=a(433);let f=(()=>{class n{constructor(){this.login=new e.vpe,this.registerBool=new e.vpe,this.loginForm=new o.cw({email:new o.NI("",[o.kI.required]),password:new o.NI("",[o.kI.required])})}ngOnInit(){}logIn(){this.login.emit({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value})}register(){this.registerBool.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-login"]],outputs:{login:"login",registerBool:"registerBool"},decls:13,vars:2,consts:[[1,"flex","dir-col","ai-c","jc-c",3,"formGroup"],["type","email","formControlName","email","placeholder","Enter your Email"],["type","password","formControlName","password","placeholder","Enter your Password"],[3,"disabled","click"],[3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Log In"),e.qZA(),e.TgZ(2,"form",0),e._UZ(3,"input",1)(4,"br")(5,"input",2)(6,"br"),e.TgZ(7,"button",3),e.NdJ("click",function(){return r.logIn()}),e._uU(8,"Log In"),e.qZA()(),e.TgZ(9,"p"),e._uU(10,"If you don't have an account "),e.TgZ(11,"a",4),e.NdJ("click",function(){return r.register()}),e._uU(12,"Register"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.loginForm),e.xp6(5),e.Q6J("disabled",!r.loginForm.valid))},dependencies:[o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["h1[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:5px;margin-bottom:20px;border-radius:2px}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline;color:#00f;cursor:pointer}"],changeDetection:0}),n})(),_=(()=>{class n{constructor(){this.registerForm=new o.cw({username:new o.NI("",[o.kI.required,o.kI.pattern("[a-zA-z0-9-]+")]),email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required,o.kI.pattern("[A-Za-z0-9]+"),o.kI.minLength(8)])}),this.register=new e.vpe,this.login=new e.vpe}ngOnInit(){}onClick(){const t=this.registerForm.controls;let r={username:t.username.value,email:t.email.value,password:t.password.value,todos:[],notes:[],id:Date.now().toString()};this.register.emit(r)}backToLogin(){this.login.emit()}invalidClass(t){return{invalid:!this.registerForm.controls[t].valid&&this.registerForm.controls[t].dirty}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],outputs:{register:"register",login:"login"},decls:12,vars:5,consts:[[1,"flex","dir-col","ai-c","jc-c",3,"formGroup"],["type","text","formControlName","username","placeholder","Username",3,"ngClass"],["type","email","formControlName","email","placeholder","Email",3,"ngClass"],["type","password","formControlName","password","placeholder","Password",3,"ngClass"],[3,"disabled","click"],[3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Register"),e.qZA(),e.TgZ(2,"form",0),e._UZ(3,"input",1)(4,"input",2)(5,"input",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return r.onClick()}),e._uU(7,"Register"),e.qZA()(),e.TgZ(8,"p"),e._uU(9,"Back to "),e.TgZ(10,"a",5),e.NdJ("click",function(){return r.backToLogin()}),e._uU(11,"Login"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.registerForm),e.xp6(1),e.Q6J("ngClass",r.invalidClass("username")),e.xp6(1),e.Q6J("ngClass",r.invalidClass("email")),e.xp6(1),e.Q6J("ngClass",r.invalidClass("password")),e.xp6(1),e.Q6J("disabled",!r.registerForm.valid))},dependencies:[c.mk,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u],styles:["h1[_ngcontent-%COMP%]{margin-bottom:20px}form[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:5px;margin-bottom:20px;border-radius:2px}p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline;color:#00f;cursor:pointer}"],changeDetection:0}),n})();function w(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-login",2),e.NdJ("login",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.logIn(i))})("registerBool",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.registerSwitch())}),e.qZA(),e.BQk()}}function x(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"app-register",3),e.NdJ("register",function(i){e.CHM(t);const l=e.oxw();return e.KtG(l.registerNewUser(i))})("login",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.registerSwitch())}),e.qZA()}}let v=(()=>{class n{constructor(t,r,i){this.auth=t,this.router=r,this.state=i,this.register$=new p.X(!1)}ngOnInit(){}logIn(t){let r=!1;return this.auth.login().subscribe({next:i=>{let l=i.filter(m=>m.email.toLowerCase()===t.email.toLowerCase()&&m.password===t.password);l.length>0?(this.state.loggedIn=!0,this.state.loggedInUser=l[0],this.router.navigate(["/todos"]),r=!0):alert("Wrong Email or Password")},error:i=>{console.log(i),this.auth.error.next(!0)}}),r}registerSwitch(){this.register$.next(!this.register$.value)}registerNewUser(t){this.auth.register(t).subscribe({next:()=>{this.register$.next(!1)},error:r=>{console.log(r),this.auth.error.next(!0)}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h),e.Y36(u.F0),e.Y36(C.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-auth-container"]],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["reg",""],[1,"flex","jc-c","ai-c","dir-col",3,"login","registerBool"],[1,"flex","jc-c","ai-c","dir-col",3,"register","login"]],template:function(t,r){if(1&t&&(e.YNc(0,w,2,0,"ng-container",0),e.ALo(1,"async"),e.YNc(2,x,1,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(3);e.Q6J("ngIf",!e.lcZ(1,2,r.register$))("ngIfElse",i)}},dependencies:[c.O5,f,_,c.Ov],styles:["app-login[_ngcontent-%COMP%], app-register[_ngcontent-%COMP%]{border:1px solid black;box-shadow:2px 2px 5px #000;border-radius:5px;padding:30px;min-width:310px;max-width:450px}"],changeDetection:0}),n})();var I=a(4466);let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,I.m,u.Bz.forChild([{path:"",component:v}])]}),n})()}}]);